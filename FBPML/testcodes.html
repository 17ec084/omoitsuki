<html>
  <head>
    <script src="コードクラス.js"></script>
    <script src="コンパイラ.js"></script>
  </head>
  <body>
    <textarea id="form1"></textarea>
    <script>
/*    let assertion_result;
//        コンパイラ(",,a,b,,c,,");
    let コード = new コードType(`  	
 hello world`);
    assertion_result = コード.の先頭からホワイトスペースを除去する() === "hello world";
    window.alert("コードType.の先頭からホワイトスペースを除去する\n"+(assertion_result));

    assertion_result = コード.の先頭が次に一致する("hello") && !コード.の先頭が次に一致する("ello");
    window.alert("コードType.の先頭が次に一致する\n"+(assertion_result));
*/
function period_putter(コード)
{
    const セーブデータ = コード.をセーブする();
    コード.をロードする(セーブデータ + ".");
    return true;
}

let コード = new コードType("hello");
document.write("<br>");
document.write("コードType.をセーブする: " + (コード.をセーブする()==="hello") + "<br>");

period_putter(コード);
document.write("コードType.をロードする: " + (コード.をセーブする()==="hello.") + "<br>");

const copiedコード = コード.をコピーする();
period_putter(コード);
document.write("コードType.をコピーする: " + (
    (コード      .をセーブする()==="hello..")
    &&
    (copiedコード.をセーブする()==="hello.")
) + "<br>");

コード = new コードType("   h   ello");

コード.の先頭からホワイトスペースを除去する_副作用無し();
document.write("コードType.の先頭からホワイトスペースを除去する_副作用無し:" + ((コード.の先頭からホワイトスペースを除去する_副作用無し() === "h   ello") && (コード.をセーブする() === "   h   ello")) + "<br>");

コード.の先頭からホワイトスペースを除去する();
document.write("コードType.の先頭からホワイトスペースを除去する:" + ((コード.の先頭からホワイトスペースを除去する() === "h   ello") && (コード.をセーブする() === "h   ello")) + "<br>");

document.write("コードType.の先頭が次に一致する:" + 
(コード.の先頭が次に一致する("") && コード.の先頭が次に一致する("h") && コード.の先頭が次に一致する("h   ello") && (!コード.の先頭が次に一致する(" ")))
+ "<br>");

コード = new コードType("---hello!");
var success;
try
{
    コード.の先頭が次に一致しないならエラーを投げ一致するなら進める("---", "three_hyphens");
    success = true;
}
catch (error)
{
    success = false;
}

if (success && コード.をセーブする() === "hello!")
{
    コード = new コードType("---hello!");
    try
    {
        コード.の先頭が次に一致しないならエラーを投げ一致するなら進める("===", "three_equals");
        success = true;
    }
    catch (error)
    {
        success = false;
    }
    document.write("コードType.の先頭が次に一致しないならエラーを投げ一致するなら進める:" + 
    (!success) + "<br>");
}
else
    document.write("コードType.の先頭が次に一致しないならエラーを投げ一致するなら進める:false<br>");

document.write("コードType.の先頭が次に一致しないならエラーを投げ一致するなら進めてホワイトスペースを除去する:略<br>");


コード = new コードType("anonymous");
document.write("コードType.の先頭1文字が次のいずれかに一致する:" + ( コード.の先頭1文字が次のいずれかに一致する("abcdefg") && (!コード.の先頭1文字が次のいずれかに一致する("hijklmn")) +"<br>"));

コード.の先頭から次に指定する文字数だけ消去する(2);
document.write("コードType.の先頭から次に指定する文字数だけ消去する:" + ( コード.をセーブする() === "onymous" ) + "<br>");

if (コード.が残っている())
{
    コード.の先頭から次に指定する文字数だけ消去する(99);
    document.write("コードType.が残っている:" + !(コード.が残っている()) + "<br>");
}
else
    document.write("コードType.が残っている:false<br>");

document.write("コードType.の先頭から次に指定する文字数だけ取得する:略<br>");
document.write("コードType.の先頭から次に指定する文字数だけ取り出す:略<br>");



document.write("既知の穴のタグを含まない:" + 
(
    既知の穴のタグを含まない("aa</3>aa") 
    && 
    (!既知の穴のタグを含まない("aa<3/>aa"))
    &&
    (!既知の穴のタグを含まない(`aa<
322 /   >aa`))
    &&
    既知の穴のタグを含まない(`aa<
3 22 /   >aa`)
) + 
"<br>");

document.write("新規の穴の終了タグを含まない:" +
((!新規の穴の終了タグを含まない("aa</3>aa")) && 新規の穴の終了タグを含まない("aa<3/>aa")) + 
"<br>");

document.write("新規の穴の開始タグを含まない:" +
((!新規の穴の開始タグを含まない("aa<3   >aa")) && 新規の穴の終了タグを含まない("aa<3/>aa")) + 
"<br>");


コード = new コードType(`<html>
hello world!!!<br>
隣の客はよく<1>柿</1>喰う客だ
</html>`);
document.write("htmlコード(1/4):"+ 
(
    htmlコード(コード) === `<html>
hello world!!!<br>
隣の客はよく`
    &&
    コード.をセーブする() === `<1>柿</1>喰う客だ
</html>`
) + "<br>");



コード.の先頭から次に指定する文字数だけ消去する(3);
document.write("htmlコード(2/4):"+ 
(
    htmlコード(コード) === "柿"
    &&
    コード.をセーブする() === `</1>喰う客だ
</html>`
) + "<br>");



コード = new コードType("abc<  4 />def");
document.write("htmlコード(3/4):"+ 
(
    htmlコード(コード) === "abc"
    &&
    コード.をセーブする() === "<  4 />def"
) + "<br>");



コード = new コードType("abcdef");
document.write("htmlコード(4/4):"+ 
(
    htmlコード(コード) === "abcdef"
    &&
    コード.をセーブする() === ""
) + "<br>");



コード = new コードType("<123   />aaa");
document.write("既知の穴(1/2):" + 
(
    既知の穴(コード)[1] === "123"
    &&
    コード.をセーブする() === "aaa"
) +
"<br>"
);


コード = new コードType("a<123   />aaa");
try
{
    既知の穴(コード);
    success = true
}
catch (error)
{
    success = false;
}
document.write("既知の穴(2/2):" + !success + "<br>");


var arr;
コード = new コードType("< 1 ><html>abc< / html>< / 22 >def");
arr = 新規の穴(コード);
document.write("新規の穴(1/4):" + 
(
        arr.length == 7
    &&  arr[0] === "<"
    &&  arr[1] === "1"
    &&  arr[2] === ">"
    &&  arr[3] === "<html>abc< / html>"
    &&  arr[4] === "</"
    &&  arr[5] === "22"
    &&  arr[6] === ">"
    &&  コード.をセーブする() === "def"
)
+ "<br>");


コード = new コードType("< 1 >< / 22 >def");
arr = 新規の穴(コード);
document.write("新規の穴(2/4):" + 
(
        arr.length == 7
    &&  arr[0] === "<"
    &&  arr[1] === "1"
    &&  arr[2] === ">"
    &&  arr[3] === ""
    &&  arr[4] === "</"
    &&  arr[5] === "22"
    &&  arr[6] === ">"
    &&  コード.をセーブする() === "def"
)
+ "<br>");

コード = new コードType("z< 1 >abc< / 22 >def");
try
{
    新規の穴(コード);
    success = true;
}
catch (error)
{
    success = false;
}
document.write("新規の穴(3/4):" + !success + "<br>");


コード = new コードType("< 1 >def");
try
{
    新規の穴(コード);
    success = true;
}
catch (error)
{
    success = false;
}
document.write("新規の穴(4/4):" + !success + "<br>");



コード = new コードType(`<html>
隣の<1>客</1>はよく<2>柿</2>喰
う<1/>だ。<br>
---
<1>東京</1>特許<2>許可</2>局。<br>
</html>`);
arr = 文(コード);
/*for (elem of arr)
{
    window.alert(elem);
}*/
document.write("文(1/2):" + 
(
        arr.length == 7
    &&  arr[0].length == 2
    &&  arr[0][0] === "htmlコード"
    &&  arr[0][1] === `<html>
隣の`
    &&  arr[1].length == 2
    &&  arr[1][0] === "新規の穴"
    &&  arr[1][1].length == 7
    &&  arr[1][1][1] === "1"
    &&  arr[1][1][3] === "客"
    &&  arr[1][1][5] === "1"

    &&  arr[2].length == 2
    &&  arr[2][0] === "htmlコード"
    &&  arr[2][1] === "はよく"

    &&  arr[3].length == 2
    &&  arr[3][0] === "新規の穴"
    &&  arr[3][1].length == 7
    &&  arr[3][1][1] === "2"
    &&  arr[3][1][3] === "柿"
    &&  arr[3][1][5] === "2"

    &&  arr[4].length == 2
    &&  arr[4][0] === "htmlコード"
    &&  arr[4][1] == "喰\nう"

    &&  arr[5].length == 2
    &&  arr[5][0] === "既知の穴"
    &&  arr[5][1].length == 3
    &&  arr[5][1][1] === "1"

    &&  arr[6].length == 2
    &&  arr[6][0] === "htmlコード"
    &&  arr[6][1] === "だ。<br>\n"

    &&  コード.をセーブする() === `---
<1>東京</1>特許<2>許可</2>局。<br>
</html>`
)
+"<br>"
)


コード.の先頭からホワイトスペースを除去する();
コード.の先頭から次に指定する文字数だけ消去する(3);
try
{
    arr = 文(コード);
    success = true;
}
catch (error)
{
    success = false;
}
document.write("文(2/2):" + success + "<br>");


arr = FBPML(`---
<html>
隣の<1>客</1>はよく<2>柿</2>喰
う<1/>だ。<br>
---
<1>東京</1>特許<2>許可</2>局。<br>
</html>`);
document.write("FBPML:" + 
(
        arr.length == 2
    &&  arr[0].length == 2
    &&  arr[0][1].length == 7
    &&  arr[0][1][0][0] === "htmlコード"
    &&  arr[0][1][0][1] === `<html>
隣の`
    &&  arr[0][1][1].length == 2
    &&  arr[0][1][1][0] === "新規の穴"
    &&  arr[0][1][1][1].length == 7
    &&  arr[0][1][1][1][1] === "1"
    &&  arr[0][1][1][1][3] === "客"
    &&  arr[0][1][1][1][5] === "1"

    &&  arr[0][1][2].length == 2
    &&  arr[0][1][2][0] === "htmlコード"
    &&  arr[0][1][2][1] === "はよく"

    &&  arr[0][1][3].length == 2
    &&  arr[0][1][3][0] === "新規の穴"
    &&  arr[0][1][3][1].length == 7
    &&  arr[0][1][3][1][1] === "2"
    &&  arr[0][1][3][1][3] === "柿"
    &&  arr[0][1][3][1][5] === "2"

    &&  arr[0][1][4].length == 2
    &&  arr[0][1][4][0] === "htmlコード"
    &&  arr[0][1][4][1] == "喰\nう"

    &&  arr[0][1][5].length == 2
    &&  arr[0][1][5][0] === "既知の穴"
    &&  arr[0][1][5][1].length == 3
    &&  arr[0][1][5][1][1] === "1"

    &&  arr[0][1][6].length == 2
    &&  arr[0][1][6][0] === "htmlコード"
    &&  arr[0][1][6][1] === "だ。<br>\n"

    &&  arr[1][1].length == 4
)
+"<br>"
)


    </script>
  </body>
</html>